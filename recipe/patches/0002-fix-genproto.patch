From b581b91c0b8acecbc8cc1f1b9048f4ea78ea6493 Mon Sep 17 00:00:00 2001
From: ngam <67342040+ngam@users.noreply.github.com>
Date: Thu, 18 May 2023 23:36:59 -0400
Subject: [PATCH 2/8] fix genproto

---
 tensorflow/tsl/platform/default/build_config.bzl | 5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)

diff --git a/tensorflow/tsl/platform/default/build_config.bzl b/tensorflow/tsl/platform/default/build_config.bzl
index a3253400..49e63743 100644
--- a/tensorflow/tsl/platform/default/build_config.bzl
+++ b/tensorflow/tsl/platform/default/build_config.bzl
@@ -403,10 +403,7 @@ def py_proto_library(
 
     genproto_deps = []
     for dep in deps:
-        if dep != "@com_google_protobuf//:protobuf_python":
-            genproto_deps.append(dep + "_genproto")
-        else:
-            genproto_deps.append("@com_google_protobuf//:well_known_types_py_pb2_genproto")
+        genproto_deps.append(dep + "_genproto")
 
     proto_gen(
         name = name + "_genproto",
-- 
2.39.2 (Apple Git-143)

